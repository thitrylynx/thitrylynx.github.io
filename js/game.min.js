"use strict";window.game=function(){var e,t,d=document.querySelector(".start-page"),a=document.querySelector(".game-page"),n=document.querySelector(".end-page"),r=d.querySelector(".start-page_button"),s=a.querySelector(".game-page_button"),o=n.querySelector(".end-page_button"),i=a.querySelector(".game-page_score-number"),c=a.querySelector(".game-page_cards-list"),u=n.querySelector(".end-page__score"),l=1,C=0,w={renderCards:function(){window.card.renderCardList(),t=setTimeout(function(){w.closeOrDeleteCard("",0,"game-card--card-back",0)},5e3)},showCard:function(e){e.classList.remove("game-card--card-back"),e.setAttribute("data-card-status",1),e.style.transform='rotate("180deg")'},closeOrDeleteCard:function(e,t,d,a){var n=document.querySelectorAll(".game-card");window.card.soundCloseCard();for(var r=0;r<n.length;r++){n[r].getAttribute("data-card-status")==a&&(n[r].classList.remove("game-card--card-open"),n[r].setAttribute("data-card-status",e),n[r].setAttribute("tabindex",t),n[r].classList.add(d))}},selectCard:function(t){var d=t.target;if(d.classList.contains("game-card--card-back")&&l==window.utils.CLICKABILITY_STATE.ABLE)if(C==window.utils.COUNT_CLICK.ZERO)C++,window.card.soundOpenCard(),w.showCard(d),d.classList.add("game-card--card-open"),e=d.getAttribute("data-card-id");else{var r=d.getAttribute("data-card-id");if(e==r){var s=c.getElementsByClassName("game-card--card-back").length;i.textContent=+i.textContent+42*s,window.card.soundOpenCard(),w.showCard(d),d.classList.add("game-card--card-open"),l=window.utils.CLICKABILITY_STATE.UNABLE,setTimeout(function(){w.closeOrDeleteCard(2,"","game-card--card-none",window.utils.COUNT_CLICK.SINGLE),l=window.utils.CLICKABILITY_STATE.ABLE},700)}else{window.card.soundOpenCard(),w.showCard(d),d.classList.add("game-card--card-open"),l=window.utils.CLICKABILITY_STATE.UNABLE;var o=document.querySelectorAll('[data-card-status="2"]').length;i.textContent=+i.textContent-42*o,i.textContent<0&&(i.textContent=0),setTimeout(function(){w.closeOrDeleteCard(0,0,"game-card--card-back",window.utils.COUNT_CLICK.SINGLE),l=window.utils.CLICKABILITY_STATE.ABLE},800)}16==document.querySelectorAll('[data-card-status="2"]').length&&(a.classList.add("hidden"),n.classList.remove("hidden"),window.card.soundEnd(),u.textContent=i.textContent),C=window.utils.COUNT_CLICK.ZERO}}};function E(){window.utils.removeChilds(".game-page_cards-list"),i.textContent=0,l=1,C=0,clearTimeout(t),w.renderCards(),document.removeEventListener(window.utils.EVENT_TYPES.CLICK,E)}r.addEventListener(window.utils.EVENT_TYPES.CLICK,function e(){a.classList.remove("hidden"),d.classList.add("hidden"),w.renderCards(),document.removeEventListener(window.utils.EVENT_TYPES.CLICK,e)}),s.addEventListener(window.utils.EVENT_TYPES.CLICK,E),o.addEventListener(window.utils.EVENT_TYPES.CLICK,function(){n.classList.add("hidden"),a.classList.remove("hidden"),window.utils.removeChilds(".game-page_cards-list"),i.textContent=0,w.renderCards(),document.removeEventListener(window.utils.EVENT_TYPES.CLICK,E)}),document.addEventListener(window.utils.EVENT_TYPES.CLICK,function e(t){w.selectCard(t),document.body.removeEventListener(window.utils.EVENT_TYPES.CLICK,e)}),document.body.addEventListener(window.utils.EVENT_TYPES.KEYDOWN,function(e){e.keyCode===window.utils.KEY_CODES.ENTER&&w.selectCard(e)})}();